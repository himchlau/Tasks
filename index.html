<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>å¦™éº—æ­²æ•¸è¨ˆç®—æ©Ÿï½œç‹—ç‹—å¹´é½¡æ›ç®—äººé¡å¹´é½¡</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        "Noto Sans TC", sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: url("https://hackmd.io/_uploads/Hyc4usZlWe.png") no-repeat center center fixed;
      background-size: cover;

    }

    .card {
      background: #ffffff;
      padding: 24px 28px 30px;
      border-radius: 18px;
      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.12);
      max-width: 480px;
      width: 100%;
    }

    h1 {
      margin-top: 0;
      margin-bottom: 4px;
      font-size: 1.8rem;
      text-align: center;
    }

    .subtitle {
      text-align: center;
      font-size: 0.9rem;
      color: #777;
      margin-bottom: 20px;
    }

    .label {
      margin-bottom: 6px;
      font-size: 0.95rem;
      font-weight: 600;
      color: #444;
    }

    .row {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
    }

    select {
      flex: 1;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 0.95rem;
      background-color: #fff;
    }

    button {
      width: 100%;
      padding: 10px 14px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      background: linear-gradient(135deg, #ff9a9e, #fecf66);
      color: #4a2a00;
      margin-top: 4px;
      transition: transform 0.1s ease, box-shadow 0.1s ease;
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.18);
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    button:active {
      transform: translateY(1px);
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
    }

    .result {
      margin-top: 18px;
      padding: 12px 14px;
      border-radius: 12px;
      background: #fff8e1;
      border: 1px solid #ffe0b2;
      font-size: 0.98rem;
      line-height: 1.6;
      color: #5a3a00;
      min-height: 46px;
    }

    .result-title {
      font-weight: 700;
      margin-bottom: 4px;
    }

    .note {
      margin-top: 10px;
      font-size: 0.8rem;
      color: #999;
      line-height: 1.4;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>å¦™éº—æ­²æ•¸è¨ˆç®—æ©Ÿ</h1>
    <div class="subtitle">ç”¨ä¸­å‹çŠ¬ã€Œ15â€“9â€“5ã€è¦å‰‡ï¼Œæ›ç®—å¦™éº—çš„ç‹—ç‹—æ­²æ•¸èˆ‡äººé¡å¹´é½¡</div>

    <div class="label">è«‹é¸æ“‡å¦™éº—çš„å‡ºç”Ÿæ—¥æœŸï¼š</div>
    <div class="row">
      <select id="yearSelect"></select>
      <select id="monthSelect"></select>
      <select id="daySelect"></select>
    </div>

    <button id="calcBtn">å¹«å¦™éº—ç®—æ­²æ•¸ ğŸ¾</button>

    <div id="result" class="result">
      è«‹å…ˆé¸æ“‡å¦™éº—çš„å‡ºç”Ÿæ—¥æœŸï¼Œç„¶å¾ŒæŒ‰ä¸‹æŒ‰éˆ•ã€‚
    </div>

    <div class="note">
      æ¼”ç®—æ³•èªªæ˜ï¼š<br>
      â€§ ç¬¬ 1 å€‹ç‹—å¹´ â‰ˆ 15 å€‹äººå¹´<br>
      â€§ ç¬¬ 2 å€‹ç‹—å¹´ â‰ˆ å†åŠ  9 å€‹äººå¹´ï¼ˆå…±ç´„ 24 äººå¹´ï¼‰<br>
      â€§ ä¹‹å¾Œæ¯å¤š 1 ç‹—å¹´ â‰ˆ å†åŠ ç´„ 4â€“5 äººå¹´ï¼ˆæ­¤è™•ä»¥ 4 äººå¹´ä½œç‚ºä¸­å‹çŠ¬è¿‘ä¼¼å€¼ï¼‰<br>
      â€§ å¯¦éš›å¹´é½¡æœƒä¾å€‹é«”å·®ç•°ã€é«”é‡èˆ‡å“ç¨®ä¸åŒè€Œç•¥æœ‰å‡ºå…¥ã€‚
    </div>
  </div>

  <script>
    // === åˆå§‹åŒ–æ—¥æœŸä¸‹æ‹‰é¸å–® ===
    const yearSelect = document.getElementById('yearSelect');
    const monthSelect = document.getElementById('monthSelect');
    const daySelect = document.getElementById('daySelect');
    const resultDiv = document.getElementById('result');
    const calcBtn = document.getElementById('calcBtn');

    function initDateSelectors() {
      const today = new Date();
      const currentYear = today.getFullYear();

      // å¹´ä»½ï¼šé è¨­å¾€å‰æ¨ 25 å¹´
      const startYear = currentYear - 25;
      addOption(yearSelect, '', 'å¹´');
      for (let y = currentYear; y >= startYear; y--) {
        addOption(yearSelect, y, y + ' å¹´');
      }

      // æœˆä»½
      addOption(monthSelect, '', 'æœˆ');
      for (let m = 1; m <= 12; m++) {
        addOption(monthSelect, m, m + ' æœˆ');
      }

      // æ—¥æœŸï¼ˆä¾é¸å®šçš„å¹´/æœˆè®Šå‹•ï¼‰
      resetDayOptions();
    }

    function addOption(select, value, text) {
      const opt = document.createElement('option');
      opt.value = value;
      opt.textContent = text;
      select.appendChild(opt);
    }

    function resetDayOptions(daysInMonth = 31) {
      daySelect.innerHTML = '';
      addOption(daySelect, '', 'æ—¥');
      for (let d = 1; d <= daysInMonth; d++) {
        addOption(daySelect, d, d + ' æ—¥');
      }
    }

    function updateDays() {
      const year = parseInt(yearSelect.value, 10);
      const month = parseInt(monthSelect.value, 10);

      if (!year || !month) {
        resetDayOptions(31);
        return;
      }

      // å–å¾—æŒ‡å®šå¹´æœˆçš„å¤©æ•¸
      const daysInMonth = new Date(year, month, 0).getDate();
      resetDayOptions(daysInMonth);
    }

    yearSelect.addEventListener('change', updateDays);
    monthSelect.addEventListener('change', updateDays);

    // === è¨ˆç®—ç‹—å¹´é½¡èˆ‡äººé¡å¹´é½¡ ===

    function calculateDogYears(birthDate, today) {
      const diffMs = today - birthDate;
      if (diffMs < 0) return null; // å‡ºç”Ÿæ—¥æœŸåœ¨æœªä¾†

      const diffDays = diffMs / (1000 * 60 * 60 * 24);
      const dogYears = diffDays / 365.25; // ä»¥ä¸€å¹´ 365.25 å¤©ç‚ºè¿‘ä¼¼
      return dogYears;
    }

    // ä¸­å‹çŠ¬å¸¸è¦‹å…¬å¼ï¼ˆ15â€“9â€“4 è¦å‰‡å¯¦ä½œï¼‰
    // 0â€“1 æ­²ï¼šç·šæ€§å¾ 0ï½15 äººå¹´
    // 1â€“2 æ­²ï¼šç·šæ€§å¾ 15ï½24 äººå¹´
    // â‰¥2 æ­²ï¼š24 + 4 Ã— (D - 2)
    function dogToHumanAge(dogYears) {
      if (dogYears <= 0) return 0;
      if (dogYears <= 1) {
        return 15 * dogYears;
      } else if (dogYears <= 2) {
        return 15 + 9 * (dogYears - 1);
      } else {
        return 24 + 4 * (dogYears - 2);
      }
    }

    calcBtn.addEventListener('click', () => {
      const year = parseInt(yearSelect.value, 10);
      const month = parseInt(monthSelect.value, 10);
      const day = parseInt(daySelect.value, 10);

      if (!year || !month || !day) {
        resultDiv.innerHTML = '<span class="result-title">è«‹ç¢ºèªï¼š</span>è«‹å®Œæ•´é¸æ“‡ã€Œå¹´ã€æœˆã€æ—¥ã€å–”ï¼';
        return;
      }

      const birthDate = new Date(year, month - 1, day);
      const today = new Date();

      const dogYears = calculateDogYears(birthDate, today);
      if (dogYears === null) {
        resultDiv.innerHTML = '<span class="result-title">Oopsï¼</span> å‡ºç”Ÿæ—¥æœŸå¥½åƒåœ¨æœªä¾†ï¼Œè«‹é‡æ–°ç¢ºèªã€‚';
        return;
      }

      const humanYears = dogToHumanAge(dogYears);

      // é¡¯ç¤ºçµæœï¼šç‹—å¹´é½¡ä¿ç•™ 1 ä½å°æ•¸ï¼Œäººé¡å¹´é½¡å››æ¨äº”å…¥æˆæ•´æ•¸
      const dogYearsDisplay = dogYears.toFixed(1);
      const humanYearsDisplay = Math.round(humanYears);

      resultDiv.innerHTML =
        '<div class="result-title">è¨ˆç®—çµæœï¼š</div>' +
        'å¦™éº—ç¾åœ¨å¤§ç´„ <strong>' + dogYearsDisplay + '</strong> æ­²ç‹—å¹´é½¡ï¼Œ<br>' +
        'æ›ç®—æˆäººé¡å¹´é½¡å¤§ç´„æ˜¯ <strong>' + humanYearsDisplay + '</strong> æ­²ã€‚';
    });

    // åˆå§‹åŒ–
    initDateSelectors();
  </script>
</body>
</html>
